<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asistente Virtual - Ley del Mono</title>
    <link rel="stylesheet" href="asistente-base.css">
    <link rel="stylesheet" href="asistente-header.css">
    <link rel="stylesheet" href="asistente-tabs.css">
    <link rel="stylesheet" href="asistente-chat.css">
    <link rel="stylesheet" href="asistente-faq.css">
    <link rel="stylesheet" href="asistente-formularios.css">
    <link rel="stylesheet" href="asistente-modal.css">
    <link rel="stylesheet" href="asistente-responsive.css">
</head>
<body>
    <div class="asistente-container">
        <!-- HEADER -->
        <div class="asistente-header">
            <div class="header-avatar">
                <div class="avatar-icon">ü§ñ</div>
                <div class="status-indicator"></div>
            </div>
            <div class="header-info">
                <h1 class="header-title">Asistente Virtual</h1>
                <p class="header-subtitle">Ley del Mono 20.898</p>
            </div>
            <button class="btn-info" id="btnInfo" title="Informaci√≥n del asistente">‚ÑπÔ∏è</button>
        </div>

        <!-- TABS -->
        <div class="asistente-tabs">
            <button class="tab-btn active" id="tabChat" onclick="cambiarTab('chat')">
                üí¨ Chat Interactivo
            </button>
            <button class="tab-btn" id="tabFaq" onclick="cambiarTab('faq')">
                üìö Todas las Preguntas (85)
            </button>
            <button class="tab-btn" id="tabFormularios" onclick="cambiarTab('formularios')">
                üìÑ Formularios Regularizaci√≥n Ley N¬∞20.898
            </button>
        </div>

        <!-- TAB CONTENT: CHAT -->
        <div id="chatTabContent" class="tab-content active">
            <!-- CHAT CONTAINER -->
            <div class="chat-container" id="chatContainer">
                <!-- Mensaje de bienvenida -->
                <div class="message bot-message">
                    <div class="message-avatar">ü§ñ</div>
                    <div class="message-content">
                        <div class="message-bubble">
                            <strong>üëã ¬°Hola! Soy tu asistente virtual de la Ley del Mono</strong><br><br>
                            Tengo <strong>85 preguntas y respuestas</strong> listas para ti:<br>
                            ‚Ä¢ Requisitos de regularizaci√≥n<br>
                            ‚Ä¢ Plazos y vigencia<br>
                            ‚Ä¢ Documentos necesarios<br>
                            ‚Ä¢ Beneficios y descuentos<br>
                            ‚Ä¢ Proceso paso a paso<br><br>
                            üí° <strong>Cambia a la pesta√±a "Todas las Preguntas"</strong> para ver el listado completo.
                        </div>
                        <div class="message-time">Ahora</div>
                    </div>
                </div>
            </div>

            <!-- PREGUNTAS SUGERIDAS -->
            <div class="suggestions-container" id="suggestionsContainer">
                <div class="suggestions-title">üí° Preguntas populares:</div>
                <div class="suggestions-scroll" id="suggestionsScroll">
                    <!-- Las sugerencias se cargan din√°micamente -->
                </div>
            </div>

            <!-- INPUT AREA -->
            <div class="input-container">
                <div class="input-wrapper">
                    <textarea 
                        id="userInput" 
                        class="user-input" 
                        placeholder="Escribe tu pregunta aqu√≠..."
                        rows="1"
                    ></textarea>
                    <button class="btn-send" id="btnSend" title="Enviar mensaje">
                        <span class="send-icon">üì§</span>
                    </button>
                </div>
                <div class="input-hint">
                    Presiona Enter para enviar, Shift+Enter para nueva l√≠nea
                </div>
            </div>

            <!-- TYPING INDICATOR -->
            <div class="typing-indicator" id="typingIndicator" style="display: none;">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>
        </div>

        <!-- TAB CONTENT: FAQ -->
        <div id="faqTabContent" class="tab-content">
            <!-- CONTROLES FAQ -->
            <div class="faq-controles">
                <!-- Buscador -->
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input 
                        type="text" 
                        id="searchFaq" 
                        class="search-input"
                        placeholder="Buscar pregunta o palabra clave..."
                    >
                    <button id="btnClearSearchFaq" class="btn-clear-search" style="display: none;">‚úï</button>
                </div>

                <!-- Filtros de Categor√≠as -->
                <div class="categorias-filtros">
                    <div class="categorias-titulo">Filtrar por categor√≠a:</div>
                    <div class="categorias-buttons" id="categoriasButtonsFaq">
                        <!-- Se generan din√°micamente -->
                    </div>
                </div>

                <!-- Ordenamiento -->
                <div class="orden-control">
                    <label for="ordenSelectFaq">Ordenar por:</label>
                    <select id="ordenSelectFaq" class="orden-select">
                        <option value="alfabetico">A - Z (Alfab√©tico)</option>
                        <option value="categoria">Por Categor√≠a</option>
                        <option value="id">Por N√∫mero (1-85)</option>
                    </select>
                </div>

                <!-- Contador -->
                <div class="resultados-contador" id="contadorResultadosFaq">
                    Mostrando 85 de 85 preguntas
                </div>

                <!-- Botones de Acci√≥n -->
                <div class="acciones-rapidas">
                    <button id="btnExpandirTodoFaq" class="btn-accion">üìñ Expandir Todo</button>
                    <button id="btnColapsarTodoFaq" class="btn-accion">üìï Colapsar Todo</button>
                </div>
            </div>

            <!-- LISTA DE PREGUNTAS (FAQ ACORDE√ìN) -->
            <div class="faq-lista" id="faqLista">
                <!-- Las preguntas se generan din√°micamente -->
            </div>

            <!-- Sin resultados -->
            <div class="no-results" id="noResultsFaq" style="display: none;">
                <div class="no-results-icon">üîç</div>
                <h3>No se encontraron resultados</h3>
                <p>Intenta con otras palabras clave o selecciona una categor√≠a diferente</p>
                <button id="btnResetBusquedaFaq" class="btn-reset">Limpiar b√∫squeda</button>
            </div>
        </div>

        <!-- TAB CONTENT: FORMULARIOS -->
        <div id="formulariosTabContent" class="tab-content">
            <div class="formularios-container">
                <div class="formularios-header">
                    <h2>üìÑ Formularios Oficiales de Regularizaci√≥n</h2>
                    <p>Descarga los formularios oficiales del MINVU para la Ley N¬∞20.898</p>
                </div>

                <div class="formularios-lista">
                    <!-- Formulario 12.1 -->
                    <a href="https://www.minvu.gob.cl/wp-content/uploads/2019/07/Formulario-12.1-Ley-20.898-Titulo-I-art.-1%C2%B0.pdf" target="_blank" class="formulario-item">
                        <div class="formulario-numero">12.1</div>
                        <div class="formulario-info">
                            <h3>Formulario 12.1</h3>
                            <p>Ley 20.898 - T√≠tulo I Art. 1¬∞</p>
                        </div>
                        <div class="formulario-icon">üì•</div>
                    </a>

                    <!-- Formulario 12.2 -->
                    <a href="https://www.minvu.gob.cl/wp-content/uploads/2019/07/Formulario-12.2-Ley-20.898-Titulo-I-Art.-1%C2%B0.pdf" target="_blank" class="formulario-item">
                        <div class="formulario-numero">12.2</div>
                        <div class="formulario-info">
                            <h3>Formulario 12.2</h3>
                            <p>Ley 20.898 - T√≠tulo I Art. 1¬∞</p>
                        </div>
                        <div class="formulario-icon">üì•</div>
                    </a>

                    <!-- Formulario 12.3 -->
                    <a href="https://www.minvu.gob.cl/wp-content/uploads/2019/07/Formulario-12.3-Ley-20.898-Titulo-I-Art.-1%C2%B0.pdf" target="_blank" class="formulario-item">
                        <div class="formulario-numero">12.3</div>
                        <div class="formulario-info">
                            <h3>Formulario 12.3</h3>
                            <p>Ley 20.898 - T√≠tulo I Art. 1¬∞</p>
                        </div>
                        <div class="formulario-icon">üì•</div>
                    </a>

                    <!-- Formulario 12.4 -->
                    <a href="https://www.minvu.gob.cl/wp-content/uploads/2019/07/Formulario-12.4-Ley-20.898-Titulo-I-Art.-3%C2%B0.pdf" target="_blank" class="formulario-item">
                        <div class="formulario-numero">12.4</div>
                        <div class="formulario-info">
                            <h3>Formulario 12.4</h3>
                            <p>Ley 20.898 - T√≠tulo I Art. 3¬∞</p>
                        </div>
                        <div class="formulario-icon">üì•</div>
                    </a>

                    <!-- Formulario 12.5 -->
                    <a href="https://www.minvu.gob.cl/wp-content/uploads/2019/07/Formulario-12.5-Ley-20.898-Titulo-I-Art.-3%C2%B0.pdf" target="_blank" class="formulario-item">
                        <div class="formulario-numero">12.5</div>
                        <div class="formulario-info">
                            <h3>Formulario 12.5</h3>
                            <p>Ley 20.898 - T√≠tulo I Art. 3¬∞</p>
                        </div>
                        <div class="formulario-icon">üì•</div>
                    </a>

                    <!-- Formulario 12.6 -->
                    <a href="https://www.minvu.gob.cl/wp-content/uploads/2019/07/Formulario-12.6-Ley-20.898-Titulo-II.pdf" target="_blank" class="formulario-item">
                        <div class="formulario-numero">12.6</div>
                        <div class="formulario-info">
                            <h3>Formulario 12.6</h3>
                            <p>Ley 20.898 - T√≠tulo II</p>
                        </div>
                        <div class="formulario-icon">üì•</div>
                    </a>

                    <!-- Formulario 12.7 -->
                    <a href="https://www.minvu.gob.cl/wp-content/uploads/2019/07/Formulario-12.7-Ley-20.898-Titulo-II.pdf" target="_blank" class="formulario-item">
                        <div class="formulario-numero">12.7</div>
                        <div class="formulario-info">
                            <h3>Formulario 12.7</h3>
                            <p>Ley 20.898 - T√≠tulo II</p>
                        </div>
                        <div class="formulario-icon">üì•</div>
                    </a>

                    <!-- Formulario 12.9 -->
                    <a href="https://www.minvu.gob.cl/wp-content/uploads/2019/07/12.9-Certificado-Regularizacion-o-Recepcion-Titulo-III-Vivienda-con-Subsidio.pdf" target="_blank" class="formulario-item">
                        <div class="formulario-numero">12.9</div>
                        <div class="formulario-info">
                            <h3>Formulario 12.9</h3>
                            <p>Certificado Regularizaci√≥n - T√≠tulo III (Vivienda con Subsidio)</p>
                        </div>
                        <div class="formulario-icon">üì•</div>
                    </a>
                </div>

                <div class="formularios-footer">
                    <p>‚ÑπÔ∏è Los formularios se abrir√°n en una nueva pesta√±a y podr√°s descargarlos directamente desde el sitio oficial del MINVU.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL INFO -->
    <div class="modal-overlay" id="modalOverlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ÑπÔ∏è Informaci√≥n del Asistente</h2>
                <button class="modal-close" id="modalClose">‚úï</button>
            </div>
            <div class="modal-body">
                <h3>ü§ñ Dos formas de obtener ayuda:</h3>
                <p><strong>1. Chat Interactivo:</strong> Pregunta directamente y el asistente buscar√° la mejor respuesta.</p>
                <p><strong>2. Todas las Preguntas:</strong> Explora las 85 preguntas organizadas, con buscador y filtros.</p>
                
                <h3>üìö Contenido disponible:</h3>
                <ul>
                    <li>85 preguntas y respuestas completas</li>
                    <li>12 categor√≠as diferentes</li>
                    <li>B√∫squeda inteligente</li>
                    <li>3 tipos de ordenamiento</li>
                </ul>

                <h3>üìä Categor√≠as:</h3>
                <p>Requisitos, Habitabilidad, Incendios, Estabilidad, Proceso, Documentos, Costos, Casos Especiales, T√©cnico, General, Plazos, Beneficios</p>

                <h3>‚ö†Ô∏è Importante:</h3>
                <p>Este asistente proporciona informaci√≥n general. Para casos espec√≠ficos, consulta con un profesional o la DOM de tu municipalidad.</p>
            </div>
        </div>
    </div>

    <script src="preguntas-respuestas-ACTUALIZADO.json" type="application/json"></script>
    <script src="asistente.js"></script>
</body>
</html>
