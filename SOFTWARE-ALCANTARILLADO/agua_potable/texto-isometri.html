<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Texto Isom√©trico</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .controls {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 600px;
        }
        
        .control-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        
        input[type="text"], select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        
        input[type="range"] {
            width: 100%;
        }
        
        .preset-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .preset-btn {
            padding: 10px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s;
        }
        
        .preset-btn:hover {
            background: #1976D2;
        }
        
        canvas {
            background: white;
            border: 2px solid #333;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            cursor: crosshair;
        }
        
        .info {
            background: #e3f2fd;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-size: 14px;
        }
        
        .color-picker {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        input[type="color"] {
            width: 50px;
            height: 35px;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="controls">
        <h2>Generador de Texto Isom√©trico Real</h2>
        
        <div class="control-group">
            <label>Texto:</label>
            <input type="text" id="textInput" value="P.P. PN-10 √ò25mm L=2.10mm">
        </div>
        
        <div class="control-group">
            <label>√Ångulo de Rotaci√≥n: <span id="angleValue">30</span>¬∞</label>
            <input type="range" id="angleSlider" min="-180" max="180" value="30">
        </div>
        
        <div class="control-group">
            <label>√Ångulos Isom√©tricos Preestablecidos:</label>
            <div class="preset-buttons">
                <button class="preset-btn" onclick="setAngle(30)">30¬∞ ‚Üó</button>
                <button class="preset-btn" onclick="setAngle(-30)">-30¬∞ ‚Üò</button>
                <button class="preset-btn" onclick="setAngle(150)">150¬∞ ‚Üñ</button>
                <button class="preset-btn" onclick="setAngle(-150)">-150¬∞ ‚Üô</button>
                <button class="preset-btn" onclick="setAngle(90)">90¬∞ ‚Üë</button>
                <button class="preset-btn" onclick="setAngle(-90)">-90¬∞ ‚Üì</button>
            </div>
        </div>
        
        <div class="control-group">
            <label>Tama√±o de Fuente: <span id="sizeValue">20</span>px</label>
            <input type="range" id="sizeSlider" min="10" max="60" value="20">
        </div>
        
        <div class="control-group">
            <label>Grosor de L√≠nea: <span id="weightValue">1</span>px</label>
            <input type="range" id="weightSlider" min="0.5" max="3" step="0.5" value="1">
        </div>
        
        <div class="control-group">
            <label>Color del Texto:</label>
            <div class="color-picker">
                <input type="color" id="colorPicker" value="#000000">
                <span id="colorValue">#000000</span>
            </div>
        </div>
        
        <div class="info">
            üí° <strong>Tip:</strong> Haz clic en el canvas para colocar el texto. Los √°ngulos 30¬∞, -30¬∞, 150¬∞ y -150¬∞ son los est√°ndar para dibujo isom√©trico t√©cnico.
        </div>
    </div>
    
    <canvas id="canvas" width="900" height="700"></canvas>
    
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        let textObjects = [];
        
        class IsometricText {
            constructor(x, y, text, angle, fontSize, lineWeight, color) {
                this.x = x;
                this.y = y;
                this.text = text;
                this.angle = angle;
                this.fontSize = fontSize;
                this.lineWeight = lineWeight;
                this.color = color;
            }
            
            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.angle * Math.PI / 180);
                
                ctx.font = `${this.fontSize}px Arial, sans-serif`;
                ctx.strokeStyle = this.color;
                ctx.fillStyle = this.color;
                ctx.lineWidth = this.lineWeight;
                ctx.lineJoin = 'round';
                ctx.lineCap = 'round';
                
                // Dibujar con contorno suave
                ctx.strokeText(this.text, 0, 0);
                ctx.fillText(this.text, 0, 0);
                
                ctx.restore();
            }
        }
        
        function drawGrid() {
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 0.5;
            
            // Grid horizontal
            for (let i = 0; i < canvas.height; i += 30) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(canvas.width, i);
                ctx.stroke();
            }
            
            // Grid vertical
            for (let i = 0; i < canvas.width; i += 30) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, canvas.height);
                ctx.stroke();
            }
            
            // L√≠neas gu√≠a isom√©tricas
            ctx.strokeStyle = '#bbdefb';
            ctx.lineWidth = 1;
            ctx.setLineDash([5, 5]);
            
            // 30¬∞ l√≠neas
            for (let i = -canvas.height; i < canvas.width + canvas.height; i += 60) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i + canvas.height * Math.tan(30 * Math.PI / 180), canvas.height);
                ctx.stroke();
            }
            
            // -30¬∞ l√≠neas
            for (let i = 0; i < canvas.width + canvas.height; i += 60) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i - canvas.height * Math.tan(30 * Math.PI / 180), canvas.height);
                ctx.stroke();
            }
            
            ctx.setLineDash([]);
        }
        
        function redraw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawGrid();
            textObjects.forEach(obj => obj.draw());
        }
        
        function addText(x, y) {
            const text = document.getElementById('textInput').value;
            const angle = parseFloat(document.getElementById('angleSlider').value);
            const fontSize = parseFloat(document.getElementById('sizeSlider').value);
            const lineWeight = parseFloat(document.getElementById('weightSlider').value);
            const color = document.getElementById('colorPicker').value;
            
            const textObj = new IsometricText(x, y, text, angle, fontSize, lineWeight, color);
            textObjects.push(textObj);
            redraw();
        }
        
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            addText(x, y);
        });
        
        function setAngle(angle) {
            document.getElementById('angleSlider').value = angle;
            document.getElementById('angleValue').textContent = angle;
        }
        
        // Event listeners
        document.getElementById('angleSlider').addEventListener('input', (e) => {
            document.getElementById('angleValue').textContent = e.target.value;
        });
        
        document.getElementById('sizeSlider').addEventListener('input', (e) => {
            document.getElementById('sizeValue').textContent = e.target.value;
        });
        
        document.getElementById('weightSlider').addEventListener('input', (e) => {
            document.getElementById('weightValue').textContent = e.target.value;
        });
        
        document.getElementById('colorPicker').addEventListener('input', (e) => {
            document.getElementById('colorValue').textContent = e.target.value;
        });
        
        // Tecla para limpiar canvas
        document.addEventListener('keydown', (e) => {
            if (e.key === 'c' || e.key === 'C') {
                textObjects = [];
                redraw();
            }
        });
        
        // Dibujo inicial
        drawGrid();
        
        // Agregar algunos textos de ejemplo
        addText(200, 150, 'P.P. PN-10 √ò25mm', 30);
        addText(400, 300, 'L=2.10mm', -30);
    </script>
</body>
</html>